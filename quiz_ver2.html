<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>é›£æ˜“åº¦ä»˜ãã‚¯ã‚¤ã‚º</title>
<style>
body { font-family: sans-serif; text-align: center; padding: 30px; }
button { margin: 10px; padding: 10px 20px; font-size: 18px; }
#question { font-size: 24px; margin-bottom: 10px; }
#difficulty { font-size: 18px; color: #888; margin-bottom: 20px; }
#result, #score { font-size: 20px; margin-top: 30px; }
.explanation { font-size: 16px; margin-top: 10px; color: #555; }
#nextBtn { display: none; margin-top: 20px; }
#history { text-align: left; margin: 40px auto; max-width: 600px; background: #f9f9f9; padding: 20px; border-radius: 8px; }
#history h3 { margin-top: 0; }
ul { text-align: left; }
</style>
</head>
<body>

<div id="quiz-container">
<div id="question"></div>
<div id="difficulty"></div>
<div id="choices"></div>
<div id="result"></div>
<button id="nextBtn" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸</button>
</div>
<div id="score" style="display:none;"></div>
<div id="history"></div>

<script>
const quizData = [
{
question: "åŠ´åƒåŸºæº–æ³•ç¬¬1æ¡ã«ã„ã†ã€ã€ŒäººãŸã‚‹ã«å€¤ã™ã‚‹ç”Ÿæ´»ã€ã¨ã¯ã€ç¤¾ä¼šã®ä¸€èˆ¬å¸¸è­˜ã«ã‚ˆã£ã¦æ±ºã¾ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã¨ã•ã‚Œã€å…·ä½“çš„ã«ã¯ã€ã€Œè³ƒé‡‘ã®æœ€ä½é¡ã‚’ä¿éšœã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹æœ€ä½é™åº¦ã®ç”Ÿæ´»ã€ã‚’ã„ã†ã€‚",
choices: ["ã€‡(æ­£)", "Ã—(èª¤ã‚Š)"],
answer: "Ã—(èª¤ã‚Š)",
explanation: "æ³•1æ¡ã«ã„ã†ã€ã€ŒäººãŸã‚‹ã«å€¤ã™ã‚‹ç”Ÿæ´»ã€ã¨ã¯ã€æ†²æ³•25æ¡1é …ã®ã€Œå¥åº·ã§æ–‡åŒ–çš„ãªç”Ÿæ´»ã€ã‚’å†…å®¹ã¨ã™ã‚‹ã‚‚ã®ã§ã€å…·ä½“çš„ã«ã¯ã€ä¸€èˆ¬ã®ç¤¾ä¼šé€šå¿µã«ã‚ˆã£ã¦æ±ºã¾ã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚ã€€ã—ãŸãŒã£ã¦ã€æœ¬è‚¢ã¯èª¤ã‚Šã€‚",
difficulty: "ãƒ¬ãƒ™ãƒ«C(æ­£ç­”ç‡ï¼š75.1ï¼…)"
},
{
question: "ã€ŒåŠ´åƒåŸºæº–æ³•3æ¡ã¯åŠ´åƒè€…ã®ä¿¡æ¡ã«ã‚ˆã£ã¦è³ƒé‡‘ãã®ä»–ã®åŠ´åƒæ¡ä»¶ã«ã¤ãå·®åˆ¥ã™ã‚‹ã“ã¨ã‚’ç¦ã˜ã¦ã„ã‚‹ãŒã€ç‰¹å®šã®ä¿¡æ¡ã‚’æœ‰ã™ã‚‹ã“ã¨ã‚’ã€é›‡å…¥ã‚Œã‚’æ‹’ã‚€ç†ç”±ã¨ã—ã¦å®šã‚ã‚‹ã“ã¨ã‚‚ã€å³ã«ã„ã†åŠ´åƒæ¡ä»¶ã«é–¢ã™ã‚‹å·®åˆ¥å–æ‰±ã¨ã—ã¦ã€å³è¦å®šã«é•åã™ã‚‹ã‚‚ã®ã¨è§£ã•ã‚Œã‚‹ã€‚ã€ã¨ã™ã‚‹ã®ãŒã€æœ€é«˜è£åˆ¤æ‰€ã®åˆ¤ä¾‹ã§ã‚ã‚‹ã€‚",
choices: ["ã€‡(æ­£)", "Ã—(èª¤ã‚Š)"],
answer: "Ã—(èª¤ã‚Š)",
explanation: "ã€ŒåŠ´åƒåŸºæº–æ³•ä¸‰æ¡ã¯åŠ´åƒè€…ã®ä¿¡æ¡ã«ã‚ˆã¤ã¦è³ƒé‡‘ãã®ä»–ã®åŠ´åƒæ¡ä»¶ã«ã¤ãå·®åˆ¥ã™ã‚‹ã“ã¨ã‚’ç¦ã˜ã¦ã„ã‚‹ãŒã€ã“ã‚Œã¯ã€é›‡å…¥ã‚Œå¾Œã«ãŠã‘ã‚‹åŠ´åƒæ¡ä»¶ã«ã¤ã„ã¦ã®åˆ¶é™ã§ã‚ã¤ã¦ã€é›‡å…¥ã‚Œãã®ã‚‚ã®ã‚’åˆ¶ç´„ã™ã‚‹è¦å®šã§ã¯ãªã„ã€ã¨ã™ã‚‹ã®ãŒæœ€é«˜è£åˆ¤æ‰€ã®åˆ¤ä¾‹ã§ã‚ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€æœ¬è‚¢ã¯èª¤ã‚Šã€‚",
difficulty: "ãƒ¬ãƒ™B(æ­£ç­”ç‡ï¼š88.7ï¼…)"
},
{
question: "äº‹æ¥­å ´ã«ãŠã„ã¦å¥³æ€§åŠ´åƒè€…ãŒå¹³å‡çš„ã«èƒ½ç‡ãŒæ‚ªã„ã“ã¨ã€å‹¤ç¶šå¹´æ•°ãŒçŸ­ã„ã“ã¨ãŒèªã‚ã‚‰ã‚ŒãŸãŸã‚ã€ç”·å¥³é–“ã§ç•°ãªã‚‹æ˜‡æ ¼åŸºæº–ã‚’å®šã‚ã¦ã„ã‚‹ã“ã¨ã«ã‚ˆã‚Šç”·å¥³é–“ã§è³ƒé‡‘æ ¼å·®ãŒç”Ÿã˜ãŸå ´åˆã«ã¯ã€åŠ´åƒåŸºæº–æ³•ç¬¬4æ¡é•åã¨ã¯ãªã‚‰ãªã„ã€‚",
choices: ["ã€‡(æ­£)", "Ã—(èª¤ã‚Š)"],
answer: "Ã—(èª¤ã‚Š)",
explanation: "æ³•4æ¡ã®ã€Œã€Œå¥³æ€§ã§ã‚ã‚‹ã“ã¨ã‚’ç†ç”±ã¨ã—ã¦ã€ã¨ã¯ã€åŠ´åƒè€…ãŒå¥³æ€§ã§ã‚ã‚‹ã“ã¨ã®ã¿ã‚’ç†ç”±ã¨ã—ã¦ã€ã‚ã‚‹ã„ã¯ç¤¾ä¼šé€šå¿µã¨ã—ã¦åˆã¯å½“è©²äº‹æ¥­å ´ã«ãŠã„ã¦å¥³æ€§åŠ´åƒè€…ãŒä¸€èˆ¬çš„åˆã¯å¹³å‡çš„ã«èƒ½ç‡ãŒæ‚ªã„ã“ã¨ã€å‹¤ç¶šå¹´æ•°ãŒçŸ­ã„ã“ã¨ã€ä¸»ãŸã‚‹ç”Ÿè¨ˆã®ç¶­æŒè€…ã§ã¯ãªã„ã“ã¨ç­‰ã‚’ç†ç”±ã¨ã™ã‚‹ã“ã¨ã®æ„ã§ã‚ã‚Šã€ã“ã‚Œã‚‰ã‚’ç†ç”±ã¨ã—ã¦ã€å¥³æ€§åŠ´åƒè€…ã«å¯¾ã—è³ƒé‡‘ã«å·®åˆ¥ã‚’ã¤ã‘ã‚‹ã“ã¨ã¯é•æ³•ã§ã‚ã‚‹ã€ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€è¨­å•ã®å ´åˆã«ã¯ã€æ³•4æ¡é•åã¨ãªã‚‹ã€‚",
difficulty: "ãƒ¬ãƒ™B(æ­£ç­”ç‡ï¼š89.9ï¼…)"
}
];

let currentQuestion = 0;
let score = 0;
let mistakeLog = [];
let answered = false;

function showQuestion() {
const q = quizData[currentQuestion];
document.getElementById("question").textContent = q.question;
document.getElementById("difficulty").textContent = `é›£æ˜“åº¦ï¼š${q.difficulty}`;
const choicesDiv = document.getElementById("choices");
choicesDiv.innerHTML = "";

q.choices.forEach(choice => {
const btn = document.createElement("button");
btn.textContent = choice;
btn.onclick = () => checkAnswer(choice);
btn.disabled = false;
choicesDiv.appendChild(btn);
});

document.getElementById("result").textContent = "";
document.getElementById("nextBtn").style.display = "none";
answered = false;
}

function checkAnswer(userAnswer) {
if (answered) return;
answered = true;

const q = quizData[currentQuestion];
const resultDiv = document.getElementById("result");
resultDiv.innerHTML = "";

if (userAnswer === q.answer) {
resultDiv.innerHTML = `<span style="color:green;">æ­£è§£ï¼</span>`;
score++;
} else {
resultDiv.innerHTML = `<span style="color:red;">ä¸æ­£è§£â€¦ æ­£è§£ã¯ã€Œ${q.answer}ã€</span>`;
mistakeLog.push({
question: q.question,
selected: userAnswer,
correct: q.answer,
difficulty: q.difficulty
});
}

const explanationDiv = document.createElement("div");
explanationDiv.className = "explanation";
explanationDiv.innerHTML = `
é›£æ˜“åº¦ï¼š${q.difficulty}<br>
è§£èª¬ï¼š${q.explanation}
`;
resultDiv.appendChild(explanationDiv);

document.getElementById("nextBtn").style.display = "inline-block";
Array.from(document.getElementById("choices").children).forEach(btn => btn.disabled = true);
}

function nextQuestion() {
currentQuestion++;
if (currentQuestion < quizData.length) {
showQuestion();
} else {
showScore();
}
}

function showScore() {
document.getElementById("quiz-container").style.display = "none";
const scoreDiv = document.getElementById("score");
scoreDiv.style.display = "block";
scoreDiv.innerHTML = `ã‚ãªãŸã®ç‚¹æ•°ã¯ ${score} / ${quizData.length} ç‚¹ã§ã™ï¼`;

const history = JSON.parse(localStorage.getItem("quizHistory") || "[]");
const today = new Date().toLocaleDateString();
history.push({
date: today,
score: `${score}/${quizData.length}`,
mistakes: mistakeLog
});
localStorage.setItem("quizHistory", JSON.stringify(history));

showHistory();
}

function showHistory() {
const historyData = JSON.parse(localStorage.getItem("quizHistory") || "[]");
const historyDiv = document.getElementById("history");

if (historyData.length === 0) return;

historyDiv.innerHTML = "<h3>éå»ã®ã‚¹ã‚³ã‚¢å±¥æ­´</h3>";
historyData.slice(-5).reverse().forEach((record) => {
const div = document.createElement("div");
div.innerHTML = `<strong>${record.date}ï¼š</strong>${record.score}`;

if (record.mistakes.length > 0) {
const ul = document.createElement("ul");
record.mistakes.forEach(m => {
const li = document.createElement("li");
li.innerHTML = `
<strong>Q:</strong> ${m.question}<br>
é›£æ˜“åº¦: ${m.difficulty}<br>
ã‚ãªãŸã®ç­”ãˆ: <em>${m.selected}</em><br>
æ­£è§£: <strong>${m.correct}</strong>
`;
ul.appendChild(li);
});
div.appendChild(ul);
} else {
div.innerHTML += "<p>å…¨å•æ­£è§£ğŸ‰</p>";
}

historyDiv.appendChild(div);
});
}

showQuestion();
</script>
</body>

</html>
